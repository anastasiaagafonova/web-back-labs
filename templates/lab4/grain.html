{% extends "base.html" %}

{% block lab %}–ó–∞–∫–∞–∑ –∑–µ—Ä–Ω–∞{% endblock %}

{% block main %}
    <h1>–ó–∞–∫–∞–∑ –∑–µ—Ä–Ω–∞</h1>
    
    <form method="post">
        <div>
            <label for="grain_type">–¢–∏–ø –∑–µ—Ä–Ω–∞:</label>
            <select id="grain_type" name="grain_type">
                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∑–µ—Ä–Ω–æ --</option>
                <option value="barley" {% if selected_grain == 'barley' %}selected{% endif %}>–Ø—á–º–µ–Ω—å (12 000 —Ä—É–±/—Ç)</option>
                <option value="oats" {% if selected_grain == 'oats' %}selected{% endif %}>–û–≤—ë—Å (8 500 —Ä—É–±/—Ç)</option>
                <option value="wheat" {% if selected_grain == 'wheat' %}selected{% endif %}>–ü—à–µ–Ω–∏—Ü–∞ (9 000 —Ä—É–±/—Ç)</option>
                <option value="rye" {% if selected_grain == 'rye' %}selected{% endif %}>–†–æ–∂—å (15 000 —Ä—É–±/—Ç)</option>
            </select>
        </div>
        
        <div>
            <label for="weight">–í–µ—Å (—Ç–æ–Ω–Ω):</label>
            <input type="number" id="weight" name="weight" step="0.1" min="0.1" value="{{ entered_weight }}">
        </div>
        
        {% if error %}
            <div style="color: red; font-weight: bold; margin: 10px 0;">
                {{ error }}
            </div>
        {% endif %}
        
        {% if success %}
            <div style="color: green; font-weight: bold; margin: 10px 0; padding: 10px; background-color: #f0fff0; border: 1px solid green;">
                <strong>–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω.</strong><br>
                –í—ã –∑–∞–∫–∞–∑–∞–ª–∏: <strong>{{ grain_name }}</strong><br>
                –í–µ—Å: <strong>{{ weight }} —Ç</strong><br>
                {% if discount_applied %}
                    <span style="color: #d63384;">
                        üí∞ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Å–∫–∏–¥–∫–∞ 10% –∑–∞ –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º<br>
                        –†–∞–∑–º–µ—Ä —Å–∫–∏–¥–∫–∏: <strong>{{ "%.2f"|format(discount) }} —Ä—É–±</strong><br>
                        –°—É–º–º–∞ –±–µ–∑ —Å–∫–∏–¥–∫–∏: <del>{{ "%.2f"|format(total_without_discount) }} —Ä—É–±</del>
                    </span>
                {% endif %}
                <br>
                –°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ: <strong style="font-size: 1.2em;">{{ "%.2f"|format(total) }} —Ä—É–±</strong>
            </div>
        {% endif %}
        
        <div>
            <button type="submit">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </form>
    
    <div style="margin-top: 20px;">
        <a href="/lab4/">–ù–∞–∑–∞–¥ –∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π 4</a>
    </div>
{% endblock %}


